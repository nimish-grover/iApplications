<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Budget</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .fs-5 {
            font-size: 1rem !important;
        }

        .fs-6 {
            font-size: 0.75rem !important;
        }

        .fs-7 {
            font-size: 0.6rem !important;
        }

        /* .table-fixed-size {
            table-layout: fixed;
        } */
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-transparent border-bottom p-0 border-dark">
        <div class="row mx-2 my-1 w-100">
            <div class="col justify-content-center">
                <img src="{{url_for('static',filename='assets/mord logo.png')}}" alt="Mord_logo" height="40px"
                    class="me-3">
                <img src="{{url_for('static',filename='assets/NITI_Aayog_logo.svg.png')}}" alt="NITI_Aayog_logo"
                    height="40px" class="ms-3">

            </div>
            <div class="col text-center mt-1">
                <img src="{{url_for('static',filename='assets/jalagam.png')}}" alt="Jalagam" height="40px" class="me-4">
            </div>
            <div class="col text-end">
                <img src="{{url_for('static',filename='assets/giz logo.png')}}" alt="giz_logo" height="40px">
            </div>
        </div>
    </nav>
    <div class="row">
        <div class="col-4 mt-1 px-1 ps-2" style="border-right: 1px solid lightgray;">
            <div class="text-center fw-bold fs-5" style="background:#dee2e6;">DEMAND</div>
            <div class="fw-semibold fs-6 fw-semibold ms-1 mt-1">a) Human(in HaM)</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-size my-1">
                    <tr>
                        <th>Description</th>
                        <th class="text-end">Population</th>
                        <th class="text-end">Consumption</th>
                    </tr>
                    {% for item in human_data %}
                    <tr>
                        <td>{{item['category'] | title}}</td>
                        <td class="text-end">{{item['count']}}</td>
                        <td class="text-end">{{item['value']}}</td>
                    </tr>
                    {%endfor%}
                    <tfoot>
                        <tr>
                            <td colspan="1" class="text-center fw-semibold">Total</td>
                            <td class="text-end fw-semibold">{{ human_data | map(attribute='count') | sum | round(0) }}
                            </td>
                            <td class="text-end fw-semibold">{{ human_data | map(attribute='value') | sum | round(0) }}
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div class="fw-semibold fs-6 fw-semibold ms-1 mt-1">b) Livestock(in HaM)</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-size my-1">
                    <tr>
                        <th>Description</th>
                        <th class="text-end">Count</th>
                        <th class="text-end">Consumption</th>
                    </tr>
                    {%for item in livestock_data%}
                    <tr>
                        <td>{{item['category'] | title}}</td>
                        <td class="text-end">{{item['count']}}</td>
                        <td class="text-end">{{item['value']}}</td>
                    </tr>
                    {%endfor%}
                    <tfoot>
                        <tr>
                            <td colspan="1" class="text-center fw-semibold">Total</td>
                            <td class="text-end fw-semibold">{{ livestock_data | map(attribute='count') | sum | round(0)
                                }}</td>
                            <td class="text-end fw-semibold">{{ livestock_data | map(attribute='value') | sum | round(0)
                                }}</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div class="fw-semibold fs-6 fw-semibold ms-1 mt-1">c) Crops(in HaM)</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-size my-1">
                    <tr>
                        <th>Crop Name</th>
                        <th class="text-end">Area</th>
                        <th class="text-end">Consumption</th>
                    </tr>
                    {%for item in crop_data%}
                    <tr>
                        <td>{{item['category'] | title}}</td>
                        <td class="text-end">{{item['count']}}</td>
                        <td class="text-end">{{item['value']}}</td>
                    </tr>
                    {%endfor%}
                    <tfoot>
                        <tr>
                            <td colspan="1" class="text-center fw-semibold">Total</td>
                            <td class="text-end fw-semibold">{{ crop_data | map(attribute='count') | sum | round(0) }}
                            </td>
                            <td class="text-end fw-semibold">{{ crop_data | map(attribute='value') | sum | round(0) }}
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div class="fw-semibold fs-6 fw-semibold ms-1 mt-1">d) Industry(in HaM)</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-size my-1">
                    <tr>
                        <th>Industry Sector</th>
                        <th class="text-end">Count</th>
                        <th class="text-end">Water Allocation</th>
                    </tr>
                    {%for item in industry_data%}
                    <tr>
                        <td>Aerospace And Aviation</td>
                        <td class="text-end">2</td>
                        <td class="text-end">123</td>
                    </tr>
                    {%endfor%}
                    <tr>
                        <td>Agriculture</td>
                        <td class="text-end">4</td>
                        <td class="text-end">345</td>
                    </tr>
                    <tr>
                        <td>Home Furnishing</td>
                        <td class="text-end">1</td>
                        <td class="text-end">678</td>
                    </tr>
                    <tr>
                        <td>Automotive</td>
                        <td class="text-end">2</td>
                        <td class="text-end">912</td>
                    </tr>
                    <tr>
                        <td>Beauty And Wellness</td>
                        <td class="text-end">3</td>
                        <td class="text-end">345</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="text-center">Total</td>
                        <td class="text-end">12</td>
                        <td class="text-end">2403</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="col-4 mt-1 px-1" style="border-right: 1px solid lightgray;">
            <div class="text-center fw-bold fs-5" style="background:#dee2e6;">SUPPLY</div>
            <div class="fw-semibold fs-6 fw-semibold ms-1 mt-1">a) Surface Water(in HaM)</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-size my-1">
                    <tr>
                        <th>Water Body</th>
                        <th class="text-end">Count</th>
                        <th class="text-end">Storage Capacity</th>
                    </tr>
                    {%for item in surface_water_data%}
                    <tr>
                        <td>{{item['category'] | title}}</td>
                        <td class="text-end">{{item['count']}}</td>
                        <td class="text-end">{{item['value']}}</td>
                    </tr>
                    {%endfor%}
                    <tfoot>
                        <tr>
                            <td colspan="1" class="text-center fw-semibold">Total</td>
                            <td class="text-end fw-semibold">{{ surface_water_data | map(attribute='count') | sum |
                                round(0) }}</td>
                            <td class="text-end fw-semibold">{{ surface_water_data | map(attribute='value') | sum |
                                round(0) }}</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div class="fw-semibold fs-6 fw-semibold ms-1 mt-1">b) Groundwater</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-size my-1">
                    <tr>
                        <th>Description</th>
                        <th class="text-end">Value</th>
                    </tr>
                    {%for item in groundwater_data%}
                    <tr>
                        <td>{{item['name'] | title}}</td>
                        <td class="text-end">{{item['value']}}</td>
                    </tr>
                    {%endfor%}
                </table>
            </div>
            <div class="fw-semibold fs-6 fw-semibold ms-1 mt-1">c) Runoff</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-size my-1">
                    <tr>
                        <th>Catchment</th>
                        <th class="text-end">% Runoff</th>
                        <th class="text-end">Yield</th>
                        <th class="text-end">Available</th>
                    </tr>
                    {%for item in runoff_data%}
                    <tr>
                        <td>{{item['catchment'] | title }}</td>
                        <td class="text-end">{{item['runoff']}}</td>
                        <td class="text-end">{{item['runoff_yield']}}</td>
                        <td class="text-end">{{item['supply']}}</td>
                    </tr>
                    {%endfor%}
                </table>
            </div>
            <div class="fw-semibold fs-6 fw-semibold ms-1 mt-1">d) Rainfall(in mm)</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-size my-1">
                    <tr>
                        <th>Month-Year</th>
                        <th class="text-end">Actual</th>
                        <th class="text-end">Normal</th>
                    </tr>
                    {%for item in rainfall_data%}
                    <tr>
                        <td>{{item['month']}}</td>
                        <td class="text-end">{{item['actual']}}</td>
                        <td class="text-end">{{item['normal']}}</td>
                    </tr>
                    {%endfor%}
                    <tfoot>
                        <tr>
                            <td colspan="1" class="text-center fw-semibold">Total</td>
                            <td class="text-end fw-semibold">{{ rainfall_data | map(attribute='actual') | sum |
                                round(0) }}</td>
                            <td class="text-end fw-semibold">{{ rainfall_data | map(attribute='normal') | sum |
                                round(0) }}</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <div class="col-4 mt-1 px-1">
            <div class="text-center fw-bold fs-5" style="background:#dee2e6;">BASIC INFORMATION</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-sizes">
                    <tr>
                        <th>State</th>
                        <td class="text-start">{{payload['state_name']}}</td>
                    </tr>
                    <tr>
                        <th>District</th>
                        <td class="text-start">{{payload['district_name']}}</td>
                    </tr>
                    <tr>
                        <th>Block</th>
                        <td class="text-start">{{payload['block_name']}}</td>
                    </tr>
                    <tr>
                        <th>No. of Villages</th>
                        <td class="text-start">32</td>
                    </tr>
                    <tr>
                        <th>TGA</th>
                        <td class="text-start">1234.56</td>
                    </tr>
                </table>
            </div>
            <div class="text-center fw-bold fs-5" style="background:#dee2e6;">WATER TRANSFER</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-size my-1">
                    <tr>
                        <th>Water Transfer</th>
                        <th class="text-end">Quantity</th>
                    </tr>
                    <tr>
                        <td>Inward (Drinking)</td>
                        <td class="text-end">2</td>
                    </tr>
                    <tr>
                        <td>Inward (Irrigation)</td>
                        <td class="text-end">9</td>
                    </tr>
                    <tr>
                        <td>Inward (Industry)</td>
                        <td class="text-end">10</td>
                    </tr>
                    <tr>
                        <td>Outward (Drinking)</td>
                        <td class="text-end">1</td>
                    </tr>
                    <tr>
                        <td>Outward (Irrigation)</td>
                        <td class="text-end">3</td>
                    </tr>
                    <tr>
                        <td>Outward (Industry)</td>
                        <td class="text-end">7</td>
                    </tr>
                </table>
            </div>
            <div class="text-center fw-bold fs-5" style="background:#dee2e6;">WATER BUDGET</div>
            <div class="container justify-content-center m-0 fs-7">
                <table class="table table-sm table-fixed-size my-1">
                    <tr>
                        <th>Description</th>
                        <th class="text-end">Value</th>
                    </tr>
                    <tr>
                        <td colspan="2" class="text-center fw-bold">Demand</td>
                    </tr>
                    {% for row in demand_side %}
                    <tr>
                        <td class="text-start">{{row.category | title}}</td>
                        <td class="text-end">{{'%0.2f'|format(row.water_value|float)}}</td>
                    </tr>
                    {% endfor %}
                    <tr>
                        <td colspan="2" class="text-center fw-bold">Supply</td>
                    </tr>
                    {% for row in supply_side %}
                    <tr>
                        <td class="text-start">{{row.category | title}}</td>
                        <td class="text-end">{{'%0.2f'|format(row.water_value|float)}}</td>
                    </tr>
                    {% endfor %}
                    <tr>
                        <td colspan="2" class="text-center fw-bold">Budget</td>
                    </tr>
                    {% for row in water_budget %}
                    <tr>
                        <td class="text-start">{{row.category | title}}</td>
                        <td class="text-end">{{'%0.2f'|format(row.water_value|float)}}</td>
                    </tr>
                    {% endfor %}
                    <tr>
                        {% set total_supply = water_budget[1]['water_value'] %}
                        {% set total_demand = water_budget[0]['water_value'] %}
                        {% set water_budget = total_supply - total_demand %}
                        <td
                            class="text-start text-{% if water_budget < 0 %}danger{% else %}success{% endif %}-emphasis">
                            {% if water_budget < 0 %}Deficient{% else %}Surplus{% endif %}</td>
                        <td class="text-end text-{% if water_budget < 0 %}danger{% else %}success{% endif %}-emphasis">
                            {{'%0.2f'|format(water_budget|float)}}</td>
                    </tr>
                </table>
            </div>



        </div>

    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>